<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>


<style>
* {
	margin: 0;
	padding: 0;
}

div.card-header {
	background: linear-gradient(#2B3078, #0AA6B7);
	color: white;
}

div img.logo {
	width: 40%;
	margin: 0 auto;
	display: block;
}

main {
	margin: 50px auto;
}

div.card-footer {
	margin: 5px;
}

div.text-center {
	margin-top: 10px;
}

p.warn {
	color: red;
}

footer {
	background: linear-gradient(#0AA6B7, #2B3078);
	width: 100%;
	vertical-align: bottom;
	text-align: center;
}

footer #logo2 {
	width: 100vh;
	display: inline-block;
}

footer div p {
	display: inline-block;
	font-size: 20px;
	color: white;
	margin: 10px 10px;
	text-align: center;
}

footer div {
	max-width: 1000px;
	margin: 10px auto;
	text-align: center;
	position: relative;
}

footer div#sns {
	display: inline-block;
	position: relative;
}

footer img {
	display: inline-block;
	margin: 10px 10px;
	vertical-align: bottom;
}

footer img.sns {
	width: 50px;
	height: 50px;
}

footer img.twitter {
	width: 55px;
	height: 50px;
}

footer img.fb {
	width: 50px;
	height: 50px;
}

footer img.yt {
	width: 80px;
	height: 50px;
}

div.main.row {
	margin: 30px;
	width: 100%;
}

div.main div {
	margin: 20px;
}

div.main2 div {
	margin: 20px;
}

div div img.card {
	max-width: 500px;
}

div.main2 {
	display: none;
}
input#btn_yes{
    width:300px;
}
div.rounded-lg{
    height:500px;
}
.inputwight input{
    width:280px;
}
</style>
</head>
<body>

<div id="app">
	<div id="layoutAuthentication_content">
		<main>
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-lg-7">
						<div class="card shadow-lg border-0 rounded-lg mt-5">
							<div class="card-header">
						
								
								</a>
								<h3 class="text-center font-weight-light my-4">夢想假期會員忘記密碼頁面</h3>
							
							</div>
	
            <div class="container"> 
                 <div class="row inputwight"> 
                     <div class="col-md-6"> 
                            <div class="col-md-6">
                                <div class="form-floating mb-3 mb-md-0">
                                    <input type="text" class="form-control Useremail" style="margin:5px;"  v-model.trim="UserEmail" required
                                    placeholder="帳號">
                                    <label for="inputFirstName">會員帳號：</label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-floating mb-3 mb-md-0">
                                    <input class="form-control UserName" id="inputFirstName" style="margin:5px;"
                                    
                                        type="text" name="name"	v-model.trim="UserName" placeholder="密碼"							
                                         /> <label
                                        for="inputFirstName">密碼</label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-floating mb-3 mb-md-0">
                                    <input class="form-control questionmatter" id="inputFirstName" style="margin:5px;"
                                    
                                        type="text" name="name"	v-model="UserSubject" placeholder="主旨"										
                                       /> <label
                                        for="inputFirstName">問題主旨</label>
                                </div>
                            </div>


										<div class="col-md-6">
											<div class="form-floating mb-3 mb-md-0">
												<input class="form-control questioncontent" id="inputFirstName" style="margin:5px;"
												
													type="text" name="name"	v-model="UserQuestion"	placeholder="問題內容"									
													/> <label
													for="inputFirstName">問題內容</label>
											</div>
										</div>
                                        <div  id="passwordbutton">
                                            <ul v-for="item in errormas">
                                                <li id="errormas" style="color: red"  >{{item}}</li>
                                           </ul>
                                        </div>
								
                            </div> 
                            <div class="col-md-6" >
                                <img style="width:300px;height: 300px; margin:10px auto;"  src="https://img.4gamers.com.tw/puku-clone-version/01_amongus-ada7625dc4f9f1f9b1fc08844e9637b28d7c678b.jpg"
                                >
                            </div>                 
                 </div>                 
             </div> 

									<div class="row justify-content-center">
										<!-- Button trigger modal -->
										<input type="hidden" name="action" value="insert"> 
										<input id="btn_yes" class="btn btn-primary forgetpassword" style="margin:5px;" type="submit" @click="forgetpassword()"  value="忘記密碼">
                                        <input id="btn_yes" class="btn btn-primary gohome" style="margin:5px;" type="submit" @click="removelogin()"  value="返回">
								    
                                    </div>	
						</div>
                     
					</div>
				</div>
			</div>
	</div>
	</main>
	</div>
</div>
   
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.1.4/vue.global.min.js"></script>

<script>
    Vue.createApp({
            data() {
                return {
                   UserEmail : "",
                   UserName : "",
                   UserSubject : "",
                   UserQuestion :"",
                   errormas:[],
                   suremail : /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,
                   chinese : /^[\u4e00-\u9fa5]+$/
                }
            },
            methods: {
                forgetpassword(){
                    var suremail = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
                    var chinese=/^[\u4e00-\u9fa5]+$/;
                    this.errormas=[]
                    if(this.UserEmail==""&&this.UserName==""){
                        this.errormas.push("請輸入信箱帳號");
                        this.errormas.push("請輸入驗證姓名")
                    }else if(this.UserEmail==""){
                        this.errormas.push("請輸入信箱帳號");
                    }else if(this.UserName==""){
                        this.errormas.push("請輸入驗證姓名");
                    }else if(!this.suremail.test(this.UserEmail)&&!this.chinese.test(this.UserName)){
                        this.errormas.push("請輸入正確信箱格式");
                        this.errormas.push("請輸入中文")
                    }else if(!this.suremail.test(this.UserEmail)){
                        this.errormas.push("請輸入正確信箱格式");
                    }else if(!this.chinese.test(this.UserName)){
                        this.errormas.push("姓名欄位請輸入中文")
                    }else if(this.UserSubject=="" && this.UserQuestion==""){
                        this.errormas.push("請輸入主旨");
                        this.errormas.push("回報問題不能為空")
                    }else if(this.UserSubject==""){
                        this.errormas.push("請輸入主旨");
                    }else if(this.UserQuestion==""){
                        this.errormas.push("回報問題不能為空")
                    }else{
                        let text = {
                            "email" : this.UserEmail,
                            "name" :  this.UserName,
                            "questionmatter" : this.UserSubject,
                            "questioncontent" : this.UserQuestion
                        };
                        $.ajax({
                            url: "http://localhost:8080/springbootusers/forgetpassword",           // 資料請求的網址
                            type: "POST",                  // GET | POST | PUT | DELETE | PATCH
                            data: text,               // 傳送資料到指定的 url
                            dataType: "json",             // 預期會接收到回傳資料的格式： json | xml | html

                            success: function(test){      // request 成功取得回應後執行  
                                
                                    if(test =="查無此帳號"){
                                        alert("查無此帳號請確認");
                                    }else if(test == "請確認身分"){
                                        alert("請確認身分");
                                    }else if(test =="請至信箱收取密碼"){
                                        alert("請至信箱收取密碼並重新登入")
                                        location.href="springVueLogin.html"
                                    }
                                                                                            
                            }
                        });
                    }

                },
                removelogin(){
                    location.href="springVueLogin.html";
                }


            },
            computed:{
                    
                    
            } 
    }).mount('#app');
</script>




</body>
</html>