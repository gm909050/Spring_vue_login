<!DOCTYPE html>
<html lang="UTF-8">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="Chrome" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>夢想假期會員註冊頁面 - DreamHoliday</title>

<!-- <script
	src="<%=request.getContextPath()%>/https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"
	crossorigin="anonymous"></script>
<script
	src="<%=request.getContextPath()%>/https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
	<link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>


<style>
* {
	margin: 0;
	padding: 0;
}

div.card-header {
	background: linear-gradient(#2B3078, #0AA6B7);
	color: white;
}

div img.logo {
	width: 40%;
	margin: 0 auto;
	display: block;
}

main {
	margin: 50px auto;
}

div.card-footer {
	margin: 5px;
}

div.text-center {
	margin-top: 10px;
}

p.warn {
	color: red;
}

footer {
	background: linear-gradient(#0AA6B7, #2B3078);
	width: 100%;
	vertical-align: bottom;
	text-align: center;
}

footer #logo2 {
	width: 100vh;
	display: inline-block;
}

footer div p {
	display: inline-block;
	font-size: 20px;
	color: white;
	margin: 10px 10px;
	text-align: center;
}

footer div {
	max-width: 1000px;
	margin: 10px auto;
	text-align: center;
	position: relative;
}

footer div#sns {
	display: inline-block;
	position: relative;
}

footer img {
	display: inline-block;
	margin: 10px 10px;
	vertical-align: bottom;
}

footer img.sns {
	width: 50px;
	height: 50px;
}

footer img.twitter {
	width: 55px;
	height: 50px;
}

footer img.fb {
	width: 50px;
	height: 50px;
}

footer img.yt {
	width: 80px;
	height: 50px;
}

div.main.row {
	margin: 30px;
	width: 100%;
}

div.main div {
	margin: 20px;
}

div.main2 div {
	margin: 20px;
}

div div img.card {
	max-width: 500px;
}

div.main2 {
	display: none;
}
input#btn_yes{
    width:300px;
}
div.rounded-lg{
    height:500px;
}
.inputwight input{
    width:280px;
}
</style>
</head>
<body>

<div id="app">
	<div id="layoutAuthentication_content">
		<main>
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-lg-7">
						<div class="card shadow-lg border-0 rounded-lg mt-5">
							<div class="card-header">
						
								
								</a>
								<h3 class="text-center font-weight-light my-4">夢想假期會員註冊頁面</h3>
							
							</div>
	
            <div class="container"> 
                 <div class="row inputwight"> 
                     <div class="col-md-6"> 
                            <div class="col-md-6">
                                <div class="form-floating mb-3 mb-md-0">
                                    <input type="text" class="form-control input_email" id="inputFirstName" style="margin:5px;"  v-model.trim="email" required
                                    placeholder="信箱">
                                    <label for="inputFirstName">Email信箱</label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-floating mb-3 mb-md-0">
                                    <input class="form-control password" id="inputFirstName" style="margin:5px;"
                                    
                                        type="text" name="name"	v-model.trim="password" placeholder="密碼"							
                                         /> <label
                                        for="inputFirstName">密碼</label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-floating mb-3 mb-md-0">
                                    <input class="form-control doublepassword" id="inputFirstName" style="margin:5px;"
                                    
                                        type="text" name="name"	v-model.trim="doublepassword" placeholder="密碼"										
                                       /> <label
                                        for="inputFirstName">密碼確定</label>
                                </div>
                            </div>


										<div class="col-md-6">
											<div class="form-floating mb-3 mb-md-0">
												<input class="form-control name" id="inputFirstName" style="margin:5px;"
												
													type="text" name="name"	v-model.trim="name"	placeholder="姓名"									
													/> <label
													for="inputFirstName">姓名</label>
											</div>
										</div>
								
									<div class="col-md-6">
                                        <div class="form-floating mb-3 mb-md-0">
                                            <input class="age form-control" id="telNo" style="margin:5px;"  
                                            type="number"  v-model.number.trim="age" placeholder="年齡"
                                            name="age" /> <label
                                            for="inputEmail">年齡</label>
                                        </div>
									</div>               
                            </div> 
                            <div class="col-md-6" >
                                <img style="width:300px;height: 300px; margin:10px auto;"  src="https://www.mirrormedia.com.tw/assets/images/20210528144056-72863774a2992b33f3de3a5223211d1a-mobile.jpg"
                                >
                            </div>                 
                 </div>                 
             </div> 

									<div class="row justify-content-center">
										<!-- Button trigger modal -->
										<input type="hidden" name="action" value="insert"> 
										<input id="btn_yes" class="btn btn-primary" style="margin:5px;" type="submit" @click="addUser()"  value="註冊">
                                        <input id="btn_yes" class="btn btn-primary" style="margin:5px;" type="submit" @click="reloadlogin()"  value="返回">
								    </div>	
						</div>
						<div class="card-footer text-center py-3">
					
						</div>
					</div>
				</div>
			</div>
	</div>
	</main>
	</div>
</div>
            <!--==================================表格顯示==================================			 -->
		
	
<!-- =====================新增========================== -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.1.4/vue.global.min.js"></script>
<script>
        Vue.createApp({
                data() {
                    return {
                      email:"",
                      password:"",
                      doublepassword:"",
                      name:"",
                      age:null,
                      
                    }
                },
                methods: {
//    ======================================新增會員=========================================
                    addUser(){
                        let chinese=/^[\u4e00-\u9fa5]+$/; //中文判斷
			            var suremail = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;

                        if(this.email == null || this.email==""){
                            alert("請輸入mail 這將會是你的帳號")
                        }else if(!suremail.test(this.email)){
                            alert("請輸入正確的信箱格式")
                        }else if(this.password == null || this.password==""){
                            alert("請輸入密碼")
                        }else if(this.doublepassword == null || this.doublepassword==""){
                            alert("請輸入第二次密碼")
                        }else if(this.password != this.doublepassword){
                            alert("前後密碼需相同")
                        }else if(this.name == null || this.name==""){
                            alert("請輸入姓名")
                        }else if(!chinese.test(this.name)){
                            alert("姓名請輸入中文")
                        }else if(this.name.length>3){
                            alert("輸入中文太多")
                        }else if(this.age == null || this.age==""){
                            alert("請輸入年紀")
                        }else if(this.age>100){
                            alert("請輸入正確年紀")
                        }else{
                            // var params = new URLSearchParams();
                            // params.append('name', this.name);
                            // params.append('age', this.age);
                            // params.append('email', this.email);
                            // params.append('password', this.password);
                            // var text ={
                            //     name : this.name,
                            //     age : this.age,
                            //     email : this.email,
                            //     password : this.password
                            // }

                            // axios.post('http://localhost:8080/springbootusers/save',params)
                            //     .then( (response) => 
                            //             {
                            //             if(response ===""||response ==="NULL"){
                            //                 alert("新增失敗此email有人使用");
                            //             }else{
                            //                 alert("新增成功"); 
                            //             }
                            //         }
                            //     )
                            //     .catch( (error) => alert("新增失敗"))

                            let text = {
                                "name" : this.name,
                                "age" : this.age,
                                "email" : this.email,
                                "password" : this.password
                            };

                            console.log(text);
                            $.ajax({
                                url: "http://localhost:8080/springbootusers/save",           // 資料請求的網址
                                type: "POST",                  // GET | POST | PUT | DELETE | PATCH
                                data: text,               // 傳送資料到指定的 url
                                dataType: "text",             // 預期會接收到回傳資料的格式： json | xml | html

                                success: function(test){      // request 成功取得回應後執行  
                                    if(test ===""){
                                        alert("新增失敗此email有人使用");
                                    }else{
                                        alert("新增成功");
                                        location.reload();
                                        location.href="springVueLogin.html";
                                    }
                                                                        
                                }
                            });
                        }
                    },
                    reloadlogin(){
                        location.href="springVueLogin.html";
                    },
                

                },
               
                computed:{
                        
                        
                } 
        }).mount('#app');
</script>



</body>
</html>